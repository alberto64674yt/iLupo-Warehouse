<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iLupo Dev Tycoon</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="juego.css">

    <link rel="icon" href="/favicon/favicon.ico" />
</head>
<body>

    <div id="main-menu">
        <h1>iLupo Dev Tycoon</h1>
        <p class="game-subtitle">Gestiona tu almacén de proyectos y conviértete en una leyenda.</p>
        <div class="menu-buttons">
            <button id="continue-button" disabled>Continuar Partida</button>
            <button id="new-game-button">Nueva Partida</button>
            <button id="help-button">Ayuda</button>
            <a href="../index.html" class="back-to-portfolio-link main-menu-link">← Volver al Portfolio</a>
        </div>
        <div id="save-menu">
            <button id="export-save-button" title="Exportar Partida"><i class="fas fa-file-export"></i></button>
            <button id="import-save-button" title="Importar Partida"><i class="fas fa-file-import"></i></button>
            <input type="file" id="import-file-input" style="display: none;" accept=".txt">
        </div>
    </div>

    <div id="game-container" class="hidden">
        <header id="game-header">
            <div class="resource-display">
                <span class="resource-item" id="money-display"><i class="fas fa-coins"></i> 0 €</span>
                <span class="resource-item" id="followers-display"><i class="fas fa-users"></i> 0</span>
                <span class="resource-item" id="energy-display"><i class="fas fa-bolt"></i> 0 / 0</span>
            </div>
            <div class="date-display">
                <span id="date-text">Día 1</span>
            </div>
        </header>

        <div id="screen">
            <main id="desktop">
                <div id="desktop-icons"></div>
            </main>
            
            <div id="taskbar">
                <button id="start-button"><i class="fas fa-desktop"></i></button>
                <div id="running-apps"></div>
                <div id="clock">12:00 PM</div>
            </div>

            <div id="start-menu" class="hidden">
                <div class="start-menu-header">
                    <img src="https://i.ibb.co/S4ksHXhy/defava.png" alt="User Avatar">
                    <span>Guest</span>
                </div>
                <div class="start-menu-body">
                </div>
                <div class="start-menu-footer">
                    <button id="shutdown-button"><i class="fas fa-power-off"></i> Dormir</button>
                    <button id="main-menu-button" title="Volver al Menú Principal"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </div>
    </div>

    <template id="code-studio-template">
        <div class="code-studio-layout">
            <div class="code-editor"><div class="line-numbers"></div><pre class="code-content"></pre></div>
            <div class="ide-sidebar"><h4>Proyecto Activo</h4><div class="ide-project-info"></div><div class="ide-actions"></div></div>
        </div>
    </template>
    <template id="mytube-template">
        <div class="mytube-layout">
            <div class="video-preview"><img src="https://placehold.co/600x400/10121b/ffffff?text=Miniatura+del+Video" alt="Video Thumbnail"><h3 class="video-title-overlay"></h3></div>
            <div class="upload-section"><h4>Subiendo Vídeo...</h4><div class="progress-bar-container"><div class="progress-bar"></div></div><div class="seo-minigame-container"></div></div>
        </div>
    </template>
    <template id="browser-template">
        <div class="browser-layout">
            <div class="browser-header"><i class="fas fa-globe"></i> <span class="browser-title">iLupo Warehouse</span></div>
            <div class="browser-content"><div class="publish-area"><h4>Publicar nuevo artículo en el Almacén</h4><p>El proyecto se publicará para ganar ingresos y seguidores pasivos.</p><button class="publish-button action-button"><i class="fas fa-rocket"></i> Publicar Proyecto</button></div></div>
        </div>
    </template>
    <template id="warehouse-template"><div id="completed-projects-list"></div></template>
    <template id="stats-template"><div id="skills-panel"></div></template>
    <template id="bank-template">
        <div class="bank-layout">
            <div id="active-loan-status" class="hidden">
                </div>
            <div id="loan-options">
                <h4>Préstamos Disponibles</h4>
                <p class="bank-info">Solo puedes tener un préstamo activo a la vez. La devolución se cobrará automáticamente en la fecha indicada.</p>
                <div class="loan-cards-container">
                    </div>
            </div>
        </div>
    </template>
    
    <div id="daily-summary-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="summary-title">Resumen del Día X</h3>
            <div id="summary-content"></div>
            <button class="close-modal-button">Continuar</button>
        </div>
    </div>
    
    <div id="game-over-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3><i class="fas fa-skull-crossbones"></i> Game Over</h3>
            <p id="game-over-reason">Te has quedado sin dinero para pagar el alquiler.</p>
            <button id="restart-game-button">Empezar de Nuevo</button>
        </div>
    </div>

    <div id="help-modal" class="modal-overlay hidden">
        <div class="modal-content large">
            <button class="close-modal-button">&times;</button>
            <h3><i class="fas fa-question-circle"></i> Guía del Juego</h3>
            <div class="help-container">
			    <div class="help-section">
			        <h4><i class="fas fa-desktop"></i> Bienvenido a tu Escritorio Virtual</h4>
			        <p>En <strong>iLupo Dev Tycoon</strong>, tu objetivo es evolucionar de un desarrollador aficionado a un magnate tecnológico. Toda la gestión del juego se realiza a través de un entorno de escritorio simulado.</p>
			        <ul>
			            <li><span><strong>Aplicaciones:</strong></span><div>Todas las funciones del juego, como la tienda o los cursos, son "apps" con iconos en tu escritorio. Haz doble clic en un icono para abrir la aplicación en su propia ventana.</div></li>
			            <li><span><strong>Ventanas:</strong></span><div>Puedes mover las ventanas arrastrándolas por su barra superior y cerrarlas con el botón 'X'.</div></li>
			        </ul>
			    </div>
			    <div class="help-section">
			        <h4><i class="fas fa-sync-alt"></i> El Flujo de Desarrollo</h4>
			        <p>Para crear un proyecto, seguirás un proceso realista a través de varias aplicaciones especializadas:</p>
			        <ol>
			            <li><strong>Iniciar Proyecto (en Code Studio):</strong> Abre la app <strong>Code Studio</strong>. Allí encontrarás el botón para iniciar un nuevo proyecto.</li>
			            <li><strong>Desarrollo y Depuración (en Code Studio):</strong> El proyecto avanzará automáticamente dentro de <strong>Code Studio</strong>. Cuando termine, deberás superar el minijuego de depuración en esta misma aplicación.</li>
			            <li><strong>Vídeo y SEO (en MyTube):</strong> Una vez depurado, abre la app <strong>MyTube</strong> para iniciar el minijuego de optimización SEO.</li>
			            <li><strong>Publicación (en Navegador):</strong> Con el vídeo listo, el paso final es abrir el <strong>Navegador</strong> para publicar tu proyecto en tu "Almacén".</li>
			        </ol>
			    </div>
			    <div class="help-section">
			        <h4><i class="fas fa-box-open"></i> Otras Aplicaciones Útiles</h4>
			        <ul>
			            <li><span><strong>Almacén:</strong></span><div>Consulta la lista de todos tus proyectos completados.</div></li>
			            <li><span><strong>Estadísticas:</strong></span><div>Monitoriza el nivel y la experiencia (XP) de tus habilidades.</div></li>
			            <li><span><strong>Menú de Inicio:</strong></span><div>Usa el menú para <strong>Dormir</strong> (pasar de día y guardar) o para <strong>Volver al Menú Principal</strong> (¡cuidado, no guarda el progreso del día!).</div></li>
			        </ul>
			    </div>
			        <div class="help-section">
			        <h4><i class="fas fa-server"></i> Gastos y Game Over</h4>
			        <p>Recuerda que cada 7 días tendrás que pagar el <strong>alquiler del servidor</strong>. Si tu saldo es negativo después del pago, será <strong>Game Over</strong>.</p>
			    </div>
			</div>
        </div>
    </div>
    
    <div id="new-project-modal" class="modal-overlay hidden">
        <div class="modal-content large">
            <button class="close-modal-button">&times;</button>
            <div id="modal-step-1">
                <h3>Iniciar Nuevo Proyecto (Paso 1 de 2)</h3>
                <p>Elige el tipo de proyecto base y dale un nombre.</p>
                <div id="project-type-selection"></div>
                <input type="text" id="new-project-name-input" placeholder="Nombre de tu nuevo proyecto...">
            </div>
            <div id="modal-step-2" class="hidden">
                <h3>Añadir Tecnologías (Paso 2 de 2)</h3>
                <div class="step2-layout">
                    <div id="tech-selection-container">
                        <h4>Tecnologías Desbloqueadas</h4>
                    </div>
                    <div id="project-summary-container">
                        <h4>Resumen del Proyecto</h4>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="modal-back-button" class="hidden">Atrás</button>
                <button id="modal-next-button">Siguiente</button>
                <button id="confirm-new-project-button" class="hidden">Empezar Desarrollo</button>
                <button class="close-modal-button">Cancelar</button>
            </div>
        </div>
    </div>
    
    <div id="debug-minigame-overlay" class="modal-overlay hidden">
        <div class="minigame-container">
            <h3><i class="fas fa-bug"></i> ¡A Depurar!</h3>
            <div class="minigame-hud">
                <span>Bugs restantes: <span id="debug-bugs-left">0</span></span>
                <span>Tiempo: <span id="debug-timer">0s</span></span>
            </div>
            <div id="debug-play-area"></div>
            <button id="start-debug-button">Empezar a Depurar</button>
        </div>
    </div>
    
    <div id="video-seo-minigame-overlay" class="modal-overlay hidden">
        <div class="minigame-container">
            <h3><i class="fas fa-chart-line"></i> Optimización SEO</h3>
            <p>Selecciona las <strong>5 etiquetas correctas</strong> antes de que se acabe el tiempo.</p>
            <div class="minigame-hud">
                <span>Puntuación: <span id="seo-score">0 / 5</span></span>
                <span>Tiempo: <span id="seo-timer">15s</span></span>
            </div>
            <div id="seo-tags-container"></div>
            <button id="finish-seo-button" class="hidden">Finalizar Vídeo</button>
        </div>
    </div>

    <div id="notification-container"></div>

    <script src="data.js" defer></script>
    <script src="courses.js" defer></script>
    <script src="research.js" defer></script>
    <script src="shop.js" defer></script>
    <script src="minigames.js" defer></script>
    <script src="events.js" defer></script>
    <script src="desktop.js" defer></script> 
    <script src="ui-core.js" defer></script>
    <script src="ui-apps.js" defer></script>
    <script src="ui-modal.js" defer></script>
    <script src="main.js" defer></script>
</body>
</html>
